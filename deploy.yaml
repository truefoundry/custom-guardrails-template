type: service
name: custom-guardrails
image:
  type: build
  build_source:
    type: git
    branch_name: main
    ref: 1a66e2da8359adf721959ace09a1ab3d5ee43db2
    repo_url: https://github.com/truefoundry/custom-guardrails-template
  build_spec:
    type: dockerfile
    build_context_path: ./
    command: uvicorn app:app --host 0.0.0.0 --port 8000
    dockerfile_path: ./Dockerfile
    build_args:
      GUARDRAILS_TOKEN: >-
        eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJnb29nbGUtb2F1dGgyfDEwMjYzMzM2NjU5NDUxOTEzNzY2NiIsImFwaUtleUlkIjoiZmMwNDAzYWEtMDk0OC00ZDJkLWE1YjctNzE2NTVlMmM1YzUwIiwic2NvcGUiOiJyZWFkOnBhY2thZ2VzIiwicGVybWlzc2lvbnMiOltdLCJpYXQiOjE3NTA2OTI3NzMsImV4cCI6NDkwNDI5Mjc3M30.748_15gwkKOioFT-IBnPLRQWzoBT809CXF8ntVa9vZU
ports:
  - port: 8000
    expose: true
    protocol: TCP
    app_protocol: http
    host: custom-guardrails-hrithik-t-1-8000.tfy-usea1-ctl.devtest.truefoundry.tech
workspace_fqn: tfy-usea1-devtest:hrithik-t-1
replicas: 1
labels:
  tfy_openapi_path: openapi.json
allow_interception: false
resources:
  node:
    type: node_selector
    capacity_type: spot_fallback_on_demand
  cpu_request: 0.5
  cpu_limit: 0.5
  memory_request: 1000
  memory_limit: 1000
  ephemeral_storage_request: 500
  ephemeral_storage_limit: 500
